{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Usuario\\\\Desktop\\\\ANDREA\\\\PROGRAMACION\\\\REACT\\\\chat-web-demo\\\\frontend\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from \"react\";\nimport \"./App.css\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function ChatApp() {\n  _s();\n  const [sessionId, setSessionId] = useState(null);\n  const [question, setQuestion] = useState(\"\");\n  const [messages, setMessages] = useState([]);\n  const messagesEndRef = useRef(null);\n\n  // Auto-scroll al final\n  const scrollToBottom = () => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: \"smooth\"\n    });\n  };\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n  const handleUpload = async e => {\n    const formData = new FormData();\n    formData.append(\"file\", e.target.files[0]);\n    const res = await fetch(\"http://127.0.0.1:8000/upload_file/\", {\n      method: \"POST\",\n      body: formData\n    });\n    const data = await res.json();\n    setSessionId(data.session_id);\n  };\n  const handleAsk = async () => {\n    if (!sessionId || !question.trim()) return;\n    const formData = new FormData();\n    formData.append(\"session_id\", sessionId);\n    formData.append(\"question\", question);\n    const res = await fetch(\"http://127.0.0.1:8000/chat/\", {\n      method: \"POST\",\n      body: formData\n    });\n    const data = await res.json();\n    setMessages(prev => [...prev, {\n      user: question,\n      bot: data.answer\n    }]);\n    setQuestion(\"\");\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chat-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Chat con PDF\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this), !sessionId && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Sub\\xED un PDF/Excel/CSV para empezar:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        accept: \"application/pdf\",\n        onChange: handleUpload\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }, this), sessionId && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"session-info\",\n        children: [\"Sesi\\xF3n activa: \", sessionId]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat-messages\",\n        children: [messages.map((m, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"message message-user\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: m.user\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 17\n          }, this)\n        }, i, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 15\n        }, this)), messages.map((m, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"message message-bot\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: m.bot\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 17\n          }, this)\n        }, i, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 15\n        }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n          ref: messagesEndRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          value: question,\n          onChange: e => setQuestion(e.target.value),\n          placeholder: \"Escrib\\xED tu pregunta...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleAsk,\n          children: \"Enviar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 5\n  }, this);\n}\n_s(ChatApp, \"b8/ff4rphLJzndcPrVzE0wII7dg=\");\n_c = ChatApp;\nvar _c;\n$RefreshReg$(_c, \"ChatApp\");","map":{"version":3,"names":["React","useState","useRef","useEffect","jsxDEV","_jsxDEV","Fragment","_Fragment","ChatApp","_s","sessionId","setSessionId","question","setQuestion","messages","setMessages","messagesEndRef","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","handleUpload","e","formData","FormData","append","target","files","res","fetch","method","body","data","json","session_id","handleAsk","trim","prev","user","bot","answer","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","accept","onChange","map","m","i","ref","value","placeholder","onClick","_c","$RefreshReg$"],"sources":["C:/Users/Usuario/Desktop/ANDREA/PROGRAMACION/REACT/chat-web-demo/frontend/src/App.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from \"react\";\nimport \"./App.css\";\n\nexport default function ChatApp() {\n  const [sessionId, setSessionId] = useState(null);\n  const [question, setQuestion] = useState(\"\");\n  const [messages, setMessages] = useState([]);\n  const messagesEndRef = useRef(null);\n\n  // Auto-scroll al final\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  };\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  const handleUpload = async (e) => {\n    const formData = new FormData();\n    formData.append(\"file\", e.target.files[0]);\n\n    const res = await fetch(\"http://127.0.0.1:8000/upload_file/\", {\n      method: \"POST\",\n      body: formData,\n    });\n\n    const data = await res.json();\n    setSessionId(data.session_id);\n  };\n\n  const handleAsk = async () => {\n    if (!sessionId || !question.trim()) return;\n\n    const formData = new FormData();\n    formData.append(\"session_id\", sessionId);\n    formData.append(\"question\", question);\n\n    const res = await fetch(\"http://127.0.0.1:8000/chat/\", {\n      method: \"POST\",\n      body: formData,\n    });\n\n    const data = await res.json();\n    setMessages((prev) => [...prev, { user: question, bot: data.answer }]);\n    setQuestion(\"\");\n  };\n\n  return (\n    <div className=\"chat-container\">\n      <h1>Chat con PDF</h1>\n\n      {!sessionId && (\n        <div>\n          <p>Subí un PDF/Excel/CSV para empezar:</p>\n          <input type=\"file\" accept=\"application/pdf\" onChange={handleUpload} />\n        </div>\n      )}\n\n      {sessionId && (\n        <>\n          <p className=\"session-info\">Sesión activa: {sessionId}</p>\n\n          <div className=\"chat-messages\">\n            {messages.map((m, i) => (\n              <div key={i} className=\"message message-user\">\n                <p>{m.user}</p>\n              </div>\n            ))}\n            {messages.map((m, i) => (\n              <div key={i} className=\"message message-bot\">\n                <p>{m.bot}</p>\n              </div>\n            ))}\n            <div ref={messagesEndRef} />\n          </div>\n\n          <div className=\"input-group\">\n            <input\n              value={question}\n              onChange={(e) => setQuestion(e.target.value)}\n              placeholder=\"Escribí tu pregunta...\"\n            />\n            <button onClick={handleAsk}>Enviar</button>\n          </div>\n        </>\n      )}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}